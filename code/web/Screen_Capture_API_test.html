<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #video {
            border: 1px solid #999;
            width: 98%;
            max-width: 860px;
        }
    </style>
</head>

<body>
    <video id="video" autoplay></video>
    <script>
        const videoElem = document.getElementById("video");
        function dumpOptionsInfo() {
            const videoTrack = videoElem.srcObject.getVideoTracks()[0];
            console.log(videoTrack)

            console.info("Track settings:");
            console.info(JSON.stringify(videoTrack.getSettings(), null, 2));
            console.info("Track constraints:");
            console.info(JSON.stringify(videoTrack.getConstraints(), null, 2));
        }
        function startCapture(displayMediaOptions) {
            return navigator.mediaDevices.getDisplayMedia(displayMediaOptions)
                .then(captureStream => {
                    videoElem.srcObject = captureStream;
                    dumpOptionsInfo()
                })
                .catch((err) => {
                    console.error(`Error:${err}`);
                    return null;
                });
        }
        startCapture({
            video: {
                cursor: "always"
            },
            audio: {
                echoCancellation: true,
                noiseSuppression: true,
                sampleRate: 44100
            }
        });
    </script>
</body>

</html>